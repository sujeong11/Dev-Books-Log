- `λ„¤νΈμ›ν¬ μ‹μ¤ν…μ—μ„ μ²λ¦¬μ¨ μ ν• μ¥μΉ`: ν΄λΌμ΄μ–ΈνΈ λλ” μ„λΉ„μ¤κ°€ λ³΄λ‚΄λ” νΈλν”½μ μ²λ¦¬μ¨μ„ μ μ–΄ν•κΈ° μ„ν• μ¥μΉ
- ex) **νΉμ • κΈ°κ°„ λ‚΄μ— μ „μ†΅λλ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ νμλ¥Ό μ ν•**
    - μ‚¬μ©μλ” μ΄λ‹Ή 2ν μ΄μƒ μƒ κΈ€μ„ μ¬λ¦΄ μ μ—†λ‹¤.
    - κ°™μ€ λ””λ°”μ΄μ¤λ΅λ” μ£Όλ‹Ή 5ν μ΄μƒ λ¦¬μ›λ“λ¥Ό μ”μ²­ν•  μ μ—†λ‹¤.
- μ΄λ¥Ό ν†µν•΄ DoS κ³µκ²©μ— μν• `μμ› κ³ κ° λ°©μ§€ κ°€λ¥`
- `λΉ„μ© μ κ°`
- `μ„λ²„ κ³Όλ¶€ν• λ°©μ§€`

<br>
<br>
<br>

## 1λ‹¨κ³„ λ¬Έμ  μ΄ν•΄ λ° μ„¤κ³„ λ²”μ„ ν™•μ •

> μ²λ¦¬μ¨μ„ κµ¬ν„ν•λ”λ° μ—¬λ¬ κ°€μ§€ μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•  μ μλ”λ°, κ°κ° κ³ μ ν• μ¥λ‹¨μ μ„ κ°€μ§€κ³  μλ‹¤.
> 
- λ©΄μ ‘κ΄€μ—κ² μ”κµ¬ μ‚¬ν•­μ— λ€ν•΄ λ¬Όμ–΄λ³΄λ©΄ μ–΄λ–¤ μ ν• μ¥μΉλ¥Ό κµ¬ν„ν•΄μ•Ό ν•λ”μ§€ λ¶„λ…ν μ• μ μλ‹¤.
- μ”κµ¬ μ‚¬ν•­
    1. μ„¤μ •λ μ²λ¦¬μ¨μ„ μ΄κ³Όν•λ” μ”μ²­μ€ μ •ν™•ν•κ² μ ν•ν•λ‹¤.
    2. ν•΄λ‹Ή μ²λ¦¬μ¨ μ ν• μ¥μΉλ” HTTP μ‘λ‹µ μ‹κ°„μ— λ‚μ μν–¥μ„ μ£Όμ–΄μ„λ” κ³¤λ€ν•λ‹¤.
    3. κ°€λ¥ν• ν• μ μ€ λ©”λ¨λ¦¬λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
    4. ν•λ‚μ μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό μ—¬λ¬ μ„λ²„λ‚ ν”„λ΅μ„Έμ¤μ—μ„ κ³µμ ν•  μ μμ–΄μ•Ό ν•λ‹¤.
    5. μ”μ²­μ΄ μ ν•λμ—μ„ λ•λ” κ·Έ μ‚¬μ‹¤μ„ μ‚¬μ©μμ—κ² λ¶„λ…ν•κ² λ³΄μ—¬μ¤μ•Ό ν•λ‹¤.
    6. μ ν• μ¥μΉμ— μ¥μ• κ°€ μƒκΈ°λ”λΌλ„ μ „μ²΄ μ‹μ¤ν…μ— μν–¥μ„ μ£Όμ–΄μ„λ” μ•λλ‹¤.

<br>
<br>
<br>

## 2λ‹¨κ³„ κ°λµμ  μ„¤κ³„μ• μ μ‹ λ° λ™μ κµ¬ν•κΈ°

> κΈ°λ³Έμ μΈ ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ ν†µμ‹  λ¨λΈμ„ μ‚¬μ©ν•μ.
> 

### μ²λ¦¬μ¨ μ ν• μ¥μΉλ” μ–΄λ””μ— λ‘ κ²ƒμΈκ°€?

1. `ν΄λΌμ΄μ–ΈνΈ`: ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ€ μ‰½κ² μ„λ³€μ΅°κ°€ κ°€λ¥ν•΄ μ μ ν•μ§€ μ•λ‹¤. λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ κµ¬ν„μ„ ν†µμ ν•λ” κ²ƒλ„ μ–΄λ ¤μΈ μ μλ‹¤.
2. `μ„λ²„`
3. `λ―Έλ“¤μ›¨μ–΄`: ν΄λΌμ΄μ–ΈνΈ β†’ API μ„λ²„ μ‚¬μ΄μ— μ„μΉμ‹μΌ ν†µμ ν•λ„λ΅ ν•λ‹¤.

### μ²λ¦¬μ¨ μ ν• μ•κ³ λ¦¬μ¦

1. `ν† ν° λ²„ν‚·`
2. `λ„μ¶ λ²„ν‚·`
3. `κ³ μ • μλ„ μΉ΄μ΄ν„°`
4. `μ΄λ™ μλ„ λ΅κ·Έ`
5. `μ΄λ™ μλ„ μΉ΄μ΄ν„°`

### κ°λµμ μΈ μ•„ν‚¤ν…μ²

> **λ λ””μ¤**λ” μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό κµ¬ν„ν•  λ• μμ£Ό μ‚¬μ©λλ” λ©”λ¨λ¦¬ κΈ°λ° μ €μ¥μ¥μΉ
> 
> 
> [1] `INCR` λ…λ Ήμ–΄: λ©”λ¨λ¦¬μ— μ €μ¥λ μΉ΄μ΄ν„°μ κ°’μ„ 1λ§νΌ μ¦κ°€μ‹ν‚΄
> 
> [2] `EXPIRE` λ…λ Ήμ–΄: μΉ΄μ΄ν„°μ— νƒ€μ„μ•„μ›ƒ κ°’μ„ μ„¤μ •ν•λ‹¤ μ„¤μ •λ μ‹κ°„μ΄ μ§€λ‚λ©΄ μΉ΄μ΄ν„°λ” μλ™μΌλ΅ μ‚­μ 
> 

π’΅ ν΄λΌμ΄μ–ΈνΈ β†’ μ²λ¦¬μ¨ μ„ν• λ―Έλ“¤μ›¨μ–΄ β†’ λ λ””μ¤ / API μ„λ²„

- λ™μ‘ μ›λ¦¬
    - ν΄λΌμ΄μ–ΈνΈκ°€ μ²λ¦¬μ¨ μ ν• λ―Έλ“¤μ›¨μ–΄μ—κ² μ”μ²­μ„ λ³΄λ‚Έλ‹¤.
    - μ²λ¦¬μ¨ μ ν• λ―Έλ“¤μ›¨μ–΄λ” λ λ””μ¤μ μ§€μ • λ²„ν‚·μ—μ„ μΉ΄μ΄ν„°λ¥Ό κ°€μ Έμ™€ ν•λ„μ— λ„λ‹¬ν–λ”μ§€ μ•„λ‹μ§€λ¥Ό κ²€μ‚¬ν•λ‹¤.
        - ν•λ„μ— λ„λ‹¬ν–λ‹¤λ©΄ μ”μ²­μ„ κ±°λ¶€
        - ν•λ„μ— λ„λ‹¬ν•μ§€ μ•μ•λ‹¤λ©΄ μ”μ²­μ€ API μ„λ²„λ΅ μ „λ‹¬, ν•νΈ λ―Έλ“¤μ›¨μ–΄λ” μΉ΄μ΄ν„°μ κ°’μ„ μ¦κ°€μ‹ν‚¨ ν›„ λ‹¤μ‹ λ λ””μ¤μ— μ €μ¥

<br>
<br>
<br>

## 3λ‹¨κ³„ μƒμ„Έ μ„¤κ³„

### μ²λ¦¬μ¨ μ ν• κ·μΉ™

- λ¦¬ν”„νΈλ” μ²λ¦¬μ¨ μ ν•μ— μ¤ν” μ†μ¤λ¥Ό μ‚¬μ©ν•κ³  μλ‹¤.
- μ²λ¦¬μ¨ μ ν• κ·μΉ™ μμ 
    - λ§μΌ“ν… λ©”μ‹μ§€μ μµλ€μΉλ¥Ό ν•λ£¨ 5κ°λ΅ μ ν•
    
    ```java
    domain: messaging
    descriptions: 
      - key: message_type
        value: marketing
        rate_limit:
            unit: day
            requests_per_unit: 5
    ```
    
    - λ¶„λ‹Ή 5ν μ΄μƒ λ΅κ·ΈμΈν•  μ μ—†λ„λ΅ μ ν•
    
    ```java
    domain: auth
    descriptions: 
      - key: auth_type
        value: login
        rate_limit:
            unit: minute
            requests_per_unit: 5
    ```
    

### μ²λ¦¬μ¨ ν•λ„ μ΄κ³Ό νΈλν”½μ μ²λ¦¬

1. ν•λ„ μ ν•μ— κ±Έλ¦° λ©”μ‹μ§€λ¥Ό λ‚μ¤‘μ— μ²λ¦¬ν•κΈ° μ„ν•΄ νμ— λ³΄κ΄€ν•  μ μλ‹¤.
2. ν•λ„ μ ν•μ— κ±Έλ¦° μ”μ²­μ€ λ²„λ¦°λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μκΈ° μ”μ²­μ΄ μ²λ¦¬μ¨ μ ν•μ— κ±Έλ¦¬κ³  μλ”μ§€λ¥Ό μ–΄λ–»κ² κ°μ§€ν• κΉ?
    - **HTTP μ‘λ‹µ ν—¤λ”**λ¥Ό ν†µν•΄ μ• μ μλ‹¤.
    - μ΄λ² μ¥μ— μ„¤κ³„ν•λ” μ²λ¦¬μ¨ μ ν• μ¥μΉλ” λ‹¤μμ HTTP ν—¤λ”λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Έλ‹¤.
    - `X-Ratelimit-Remaining`: μλ„ λ‚΄μ— λ‚¨μ€ μ”μ²­ μ²λ¦¬ κ°€λ¥ μ”μ²­ μ
    - `X-Ratelimit-Limit`: λ§¤ μλ„λ§λ‹¤ ν΄λΌμ΄μ–ΈνΈκ°€ μ „μ†΅ν•  μ μλ” μ”μ²­ μ
    - `X-Ratelimit-Retry-After`: ν•λ„ μ ν•μ— κ±Έλ¦¬μ§€ μ•μΌλ ¤λ©΄ λ‡ μ΄ λ’¤μ— μ”μ²­μ„ λ‹¤μ‹ λ³΄λ‚΄μ•Ό ν•λ”μ§€ μ•λ¦Ό
- μ‚¬μ©μκ°€ λ„λ¬΄ λ§μ€ μ”μ²­μ„ λ³΄λ‚΄λ©΄ 429 too many requests μ¤λ¥λ¥Ό X-Ratelimit-Retry-After ν—¤λ”μ™€ ν•¨κ» λ°ν™ν•λ„λ΅ ν•λ‹¤.
- (μ „μ²΄μ μΈ μ•„ν‚¤ν…μ²λ” κ·Έλ¦Ό 4-13 μ°Έκ³ )
- μ²λ¦¬μ¨ μ ν• κ·μΉ™μ€ λ””μ¤ν¬μ— λ³΄κ΄€

### λ¶„μ‚° ν™κ²½μ—μ„μ μ²λ¦¬μ¨ μ ν• μ¥μΉμ κµ¬ν„

- μ—¬λ¬ λ€μ μ„λ²„μ™€ λ³‘λ ¬ μ¤λ λ“λ¥Ό μ§€μ›ν•λ„λ΅ μ‹μ¤ν…μ„ ν™•μ¥ν•λ” κ²ƒμ€ λ λ‹¤λ¥Έ λ¬Έμ λ‹¤. μ•„λ 2λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ•Ό ν•λ‹¤.
1. ***κ²½μ μ΅°κ±΄***
    1. λ½μΌλ΅ ν•΄κ²°ν•  μ μμ§€λ§, λ½μ€ μ‹μ¤ν…μ μ„±λ¥μ„ μƒλ‹Ήν λ–¨μ–΄λ¨λ¦°λ‹¤.
    2. λ€μ‹ , `λ£¨μ•„ μ¤ν¬λ¦½νΈ` or `μ •λ ¬ μ§‘ν•©μ΄λΌ λ¶λ¦¬λ” λ λ””μ¤ μλ£κµ¬μ΅°`λ¥Ό μ¨λ³΄μ.
2. ***λ™κΈ°ν™”***
    1. κ³ μ • μ„Έμ…μ„ ν™μ©ν•΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤. ν•μ§€λ§, κ·λ¨λ©΄μ—μ„ ν™•μ¥ κ°€λ¥ν•μ§€λ„ μ•κ³  μ μ—°ν•μ§€λ„ μ•λ‹¤.
    2. λ€μ‹ , `λ λ””μ¤`μ™€ κ°™μ€ `μ¤‘μ•™ μ§‘μ¤‘ν• λ°μ΄ν„° μ €μ¥μ†`λ¥Ό μ¨λ³΄μ.
    3. (μ „μ²΄μ μΈ μ•„ν‚¤ν…μ²λ” κ·Έλ¦Ό 4-16 μ°Έκ³ )
    

### μ„±λ¥ μµμ ν™”

> μ§€κΈκΉμ§€ μ‚΄ν΄ λ³Έ μ„¤κ³„λ” 2κ°€μ§€ μ§€μ μ—μ„ κ°μ„  κ°€λ¥ν•λ‹¤.
> 
1. μ‚¬μ©μμ νΈλν”½μ„ `κ°€μ¥ κ°€κΉμ΄ μ—μ§€ μ„λ²„`λ΅ μ „λ‹¬ν•μ—¬ μ§€μ—° μ‹κ°„μ„ μ¤„μ΄μ.
2. μ ν• μ¥μΉ κ°„ μ— λ°μ΄ν„°λ¥Ό λ™κΈ°ν™”ν•  λ–„ `μµμΆ… μΌκ΄€μ„± λ¨λΈ`μ„ μ‚¬μ©ν•μ. (6μ¥ β€ν‚¤-κ°’ μ €μ¥μ† μ„¤κ³„β€μ β€λ°μ΄ν„° μΌκ΄€μ„±β€μ„ μ°Έκ³ )

### λ¨λ‹ν„°λ§

- μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό μ„¤μΉν• μ΄ν›„μ—λ” ν¨κ³Όμ μΌλ΅ λ™μ‘ν•λ”μ§€ λ³΄κΈ° μ„ν•΄ λ°μ΄ν„°λ¥Ό λ¨μ„ ν•„μ”κ°€ μλ‹¤.
- κΈ°λ³Έμ μΌλ΅ λ‹¤μ 2κ°€μ§€λ¥Ό ν™•μΈ
    1. ***μ±„νƒλ μ²λ¦¬μ¨ μ ν• μ•κ³ λ¦¬μ¦μ΄ ν¨κ³Όμ μΈκ°€***
    2. ***μ •μν• μ²λ¦¬μ¨ μ ν• κ·μΉ™μ΄ ν¨κ³Όμ μΈκ°€***
- λ§μ•½, μ²λ¦¬μ¨ μ ν• κ·μΉ™μ΄ λ„λ¬΄ λΉ΅λΉ΅ν•κ² μ„¤μ •λμ–΄ μμ–΄ λ§μ€ μ ν¨ μ”μ²­μ΄ μ²λ¦¬λμ§€ λ»ν•κ³  λ²„λ ¤μ§„λ‹¤λ©΄ μ™„ν™”ν•  ν•„μ”κ°€ μλ‹¤.

<br>
<br>
<br>

## 4λ‹¨κ³„ λ§λ¬΄λ¦¬

- μ‹κ°„μ΄ λ‚¨μ•λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ€ λ¶€λ¶„μ„ μ–ΈκΈ‰ν•΄λ³΄λ©΄ λ„μ›€μ΄ λ  κ²ƒ
1. κ²½μ„± λλ” μ—°μ„± μ²λ¦¬μ¨ μ ν•
    1. κ²½μ„± μ²λ¦¬μ¨ μ ν•: μ”μ²­μ κ°μλ” μ„κ³„μΉλ¥Ό μ λ€ λ„μ–΄μ„¤ μ μ—†λ‹¤.
    2. μ—°μ„± μ²λ¦¬μ¨ μ ν•: μ”μ²­μ κ°μλ” μ μ‹ λ™μ•μ€ μ„κ³„μΉλ¥Ό λ„μ–΄μ„¤ μ μλ‹¤.
2. λ‹¤μ–‘ν• κ³„μΈµμ—μ„μ μ²λ¦¬μ¨ μ ν•
    1. μ΄λ² μ¥μ—μ„λ” μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ(HTTP)μ—μ„ μ‚΄ν΄λ³΄μ•μ§€λ§, λ¬Όλ¦¬ / λ°μ΄ν„° λ§ν¬ / λ„¤νΈμ›ν¬ / μ „μ†΅ / μ„Έμ… / ν‘ν„ κ³„μΈµμ—μ„λ„ μ μ© κ°€λ¥ν•λ‹¤.
3. μ²λ¦¬μ¨ μ ν•μ„ νν”Όν•λ” λ°©λ²•. ν΄λΌμ΄μ–ΈνΈλ¥Ό μ–΄λ–»κ² μ„¤κ³„ν•λ” κ²ƒμ΄ μµμ„ μΈκ°€?
    1. ν΄λΌμ΄μ–ΈνΈ μΈ΅ μΊμ‹λ¥Ό μ‚¬μ©ν•΄ API νΈμ¶ νμλ¥Ό μ¤„μΈλ‹¤.
    2. μ§§μ€ μ‹κ°„λ™μ• λ„λ¬΄ λ§μ€ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄μ§€ μ•λ„λ΅ ν•λ‹¤.
    3. μμ™Έλ‚ μ—λ¬λ¥Ό μ²λ¦¬ν•λ” μ½”λ“λ¥Ό λ„μ…ν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ μμ™Έμ μΈ μƒν™©μΌλ΅λ¶€ν„° μ°μ•„ν•κ² λ³µκµ¬λ  μ μλ„λ΅ ν•λ‹¤.
    4. μ¬μ‹λ„ λ΅μ§μ„ κµ¬ν„ν•  λ•λ” μ¶©λ¶„ν• λ°±μ¤ν”„ μ‹κ°„μ„ λ‘”λ‹¤.
