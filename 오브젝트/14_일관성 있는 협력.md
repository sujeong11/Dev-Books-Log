## INTRO
`객체지향 설계의 목표`: **적절한 책임을 수행하는 객체들의 협력을 기반으로 결합도 낮고 재사용 가능한 코드 구조를 창조하는 것**

<br>
<br>

## 02 설계에 일관성 부여하기

위한 조언: 
[1] **다양한 설계 경험을 익혀라.** [2] **디자인 패턴을 학습하고 변경이라는 문맥 안에서 디자인 패턴을 적용해보라.**

### 조건 로직 대 객체 탐색

- 조건 로직을 객체 사이의 이동으로 대체하기 위해서는 커다란 클래스를 더 작은 클래스들로 분리해야 한다.
- 클래스들을 분리하기 위해 어떤 기준을 따르는 것이 좋을까?
    - 가장 중요한 기준은 `변경의 이유`와 `주기`
    - 클래스는 명확히 **단 하나의 이유에 의해서만 변경돼야 하고 클래스 안의 모든 코드는 함께 변경**돼야 한다.
    - 즉, `단일 책임 원칙`을 따르도록 클래스를 분리해야 한다는 것이다.

큰 메서드 안에 뭉쳐있던 조건 로직들을 변경의 압력에 맞춰 작은 클래스들로 분리하고 나면 인스턴스들 사이의 협력 패턴에 일관성을 부여하기가 더 쉬워진다. **유사한 행동을 수행하는 작은 클래스들이 자연스럽게 역할이라는 `추상화`로 묶이게 되고 역할 사이에서 이뤄지는 협력 방식이 전체 설계의 일관성을 유지할 수 있게 이끌어주기 때문**이다. 

- 일관성 있는 협력을 위한 지침

  [1] 변하는 개념을 변하지 않는 개념으로부터 `분리`하라.

  [2] 변하는 개념을 `캡슐화`하라.

<br>

### 캡슐화 다시 살펴보기

> **캡슐화란 변하는 어떤 것이든 감추는 것이다.**
> 

캡술화한 단지 데이터 은닉을 의미하는 것이 아님. 코드 수정으로 인한 파급 효과를 제어할 수 있는 모든 기법이 캡술화의 일종임.

- 가장 대표적인 예 - **객체의 퍼블릭 인터페이스와 구현을 분리하는 것**
- **자주 변경되는 내부 구현을 안정적인 퍼블릭 인터페이스 뒤로 숨겨야 한다.**
- 다양한 종류의 캡슐화 공존 가능
    - `데이터 캡슐화`
    - `메서드 캡슐화`
    - `객체 캡슐화`
    - `서브타입 캡슐화`

- 변경을 캡슐화할 수 있는 다양한 방법이 존재하지만 **협력을 일관성이 있게 만들기 위해 가장 일반적으로 사용하는 방법**은 `서브타입 캡슐화`와 `객체 캡슐화`를 조합하는 것이다. 전자는 `인터페이스 상속`을 사용하고 후자는 `합성`을 사용한다.
- 위 둘을 적용하는 방법
    1. **변하는 부분을 분리해서 타입 계층을 만든다.**
    2. **변하지 않는 부분의 일부로 타입 계층을 합성한다.**

<br>
<br>

---

<br>

## 03 일관성 있는 기본 정책 구현하기

### 변경 분리하기

일관성 있는 협력을 만들기 위한 첫 번째 단계는 변하는 개념 / 변하지 않는 개념을 분리하는 것이다.

<br>

### 변경 캡슐화하기

협력을 일관성 있게 만들기 위해서는 변경을 캡슐화해서 **파급효과를 줄여야 한다.** 이를 위한 가장 좋은 방법은 `변하지 않는 부분`으로부터 `변하는 부분`을 `분리`하는 것이다. 물론 `변하는 부분의 공통점`을 `추상화`는 것도 잊어서는 안된다.

**이제 변하지 않는 부분이 오직 이 추상화에만 의존하도록 관계를 제한하면 변경을 캡슐화할 수 있게 된다.**

<br>

### 협력 패턴 설계하기

이제 객체들의 협력 방식을 고민해보자. 변하는 부분과 변하지 않는 부분을 분리하고, 변하는 부분을 적절히 추상화하고 나면 변하는 부분은 생략한 채 변하지 않는 부분만을 이용해 객체 사이의 협력을 이야기할 수 있다.

추상화만으로 구성한 협력은 추상화를 구체적인 사례로 대체함으로써 다양한 상황으로 확장할 수 있게 된다. 다시 말해 재사용 가능한 협력 패턴이 선명하게 드러나는 것이다.

<br>

### 구체적인 협력 구현하기

- 객체지향 시스템에서 **유사한 기능에 대해 유사한 협력 패턴을 적용하는 것은** `개념적 무결성`(일관성과 동일한 뜻으로 간주해도 무방)을 유지할 수 있는 가장 효과적인 방법이다.

> **저자는 개념적 무결성이 시스템 설계에서 가장 중요하다고 감히 주장한다.**
> 

> 좋은 기능들이긴 하지만 서로 독립적이고 조화되지 못한 아이디어들을 담고 있는 시스템보다 여러 가지 **다양한 기능이나 갱신된 내용은 비록 빠졌더라도 하나로 통합된 설계 아이디어를 반영하는 시스템이 훨씬 좋다.**
> 

<br>

### 협력 패턴에 맞추기

- 지속적으로 개선하라

처음에는 일관성을 유지하는 것처럼 보이던 협력 패턴이 시간이 흐르면서 새로운 요구사항이 추가되는 과정에서 일관성의 벽에 조금씩 금이 가는 경우를 자주 보게 된다.

협력은 고정된 것이 아니다. 만약 **현재의 협력 패턴이 변경의 무게를 지탱하기 어렵다면 변경을 수용할 수 있는 협력 패턴을 향해 과감하게 리팩터링하라.**
