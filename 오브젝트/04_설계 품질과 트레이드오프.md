## 01 데이터 중심의 영화 예매 시스템

- 객체지향 설계에서의 객체 분할 방법

[1] `상태(데이터)를 분할의 중심축으로 삼는 방법`: **구현에 관한 세부사항이 객체의 인터페이스에 스며들게** 되어 캡슐화의 원칙이 무너진다. 따라서 변경에 취약해진다.

[2] `책임을 분할의 중심축으로 삼는 방법`: **책임을 드러내는 안정적인 인터페이스 뒤로 책임을 수행하는데 필요한 상태를 캡슐화**함으로써 구현 변경에 대한 파장이 외부로 퍼져나가는 것을 방지한다. 따라서 변경에 유연하다.

즉, 휼륭한 객체지향 설계를 위한 방법은 2번이다.

<br>
<br>

---

<br>

## 02 설계 트레이드 오프

### 캡슐화

는 **상태와 행동을 하나의 객체로 모으는 것**으로 객체의 내부 구현을 외부로부터 감추기 위해서이다. 이는 객체지향 설계에서 한 곳에 발생한 변경이 전체 시스템에 영향을 미치지 않게 해주는 강력한 기능을 제공한다. 객체를 사용하면 변경 가능성이 높은 부분(`구현`)은 내부에 숨기고(`추상화`) 외부에는 상대적으로 안정적인 부분(`인터페이스`)만 공개해 변경의 여파를 통제할 수 있다.

⇒ **변경의 정도에 따라 구현과 인터페이스를 분리**하고 **외부에서는 인터페이스에만 의존하도록 관계를 조절하는 것**이 객체를 설계하는데 가장 기본적인 것이다.

<br>

### 응집도와 결합도

- `응집도`: 모듈에 포함된 내부 요소들이 연관돼 있는 정도
    
> 객체지향의 관점에서 응집도는 **객체 또는 클래스에 얼마나 관련 높은 책임들을 할당했는지를 나타낸다.**
> 
- `결합도`: 의존성의 정도로 다른 모듈에 대해 얼마나 많은 것을 갖고 있는지의 척도

⇒ 좋은 설계를 위해서는 **높은 응집도와 낮은 결합도를 추구**해야 한다. 이는 **설계를 변경하기 쉽게 만들기 때문**이다. 

<br>

### 주의

캡슐화를 지키면 모듈 안의 응집도는 높아지고 모듈 사이의 결합도는 낮아진다. 따라서 **응집도와 결합도를 고려하기 전에 캡슐화를 향상시키기 위해 노력하라.**

<br>
<br>

---

<br>

## 03 데이터 중심의 영화 예매 시스템의 문제점

### 캡슐화 위반

수정자에 과도하게 의존하는 경향이 있다. 이는 객체가 사용될 협력을 고려하지 않고 객체가 다양한 상황에 사용될 수 있을 것이라는 **막연한 추측을 기반으로 설계를 진행**한다. (추측에 의한 설계 전략)

<br>

### 높은 결합도

객체의 내부 구현이 객체의 인터페이스에 드러난다. 이는 **클라이언트가 구현에 강하게 결합**된다는 것을 의미한다. 따라서 객체 내부 구현이 변경되면 이 인터페이스에 의존하는 모든 클라이언트들도 함께 변경해야 한다.

<br>

### 낮은 응집도

어떤 요구사항을 수용하기 위해서는 **하나 이상의 클래스를 수정**해야 한다.

<br>
<br>

---

<br>

## 04 자율적인 객체를 향해

### 캡슐화를 지켜라

객체는 자신이 어떤 데이터를 가지고 있는지를 내부에 캡슐화하고 외부에 공개해서는 안된다. 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있어야 한다.

<br>

### 스스로 자신의 데이터를 책임지는 객체

**상태와 행동을 객체라는 하나의 단위로 묶는 이유**는 `객체 스스로 자신의 상태를 처리`할 수 있게 하기 위해서다. 객체는 단순한 데이터 제공자가 아니므로 **협력에 참여하면서 수행할 책임을 정의하는 것이 더 중요**하다. 

<br>
<br>

---

<br>

## 06 데이터 중심 설계의 문제점

[1] 데이터 중심의 설계는 본질적으로 **너무 이른 시기에 데이터에 관해 결정하도록 강요**한다.

[2] 데이터 중심의 설계에서는 **협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정**한다.

<br>

### 데이터 중심 설계는 객체의 행동보다는 상태에 초점을 맞춘다

데이터 중심 설계에서 객체는 그저 단순한 데이터의 집합체일 뿐이다. 이로 인해 접근자와 수정자를 과도하게 추가하게 되고 데이터 객체를 사용하고 절차를 분리된 별도의 객체 안에서 구현하게 된다. 이로 인해 캡슐화는 완전히 무너지게 된다.

데이터를 먼저 결정하고 오퍼레이션을 나중에 결정하니 데이터에 대한 지식이 객체의 인터페이스에 고스란히 드러나게 된다. 이것도 캡슐화에 실패하고 변경에 취약해진다.

⇒ **너무 이른 시기에 데이터를 고민**하기 때문에 `캡슐화에 실패`하게 된다.

<br>

### 데이터 중심 설계는 객체를 고립시킨 채 오퍼레이션을 정의하도록 만든다

하지만 데이터 중심 설계의 초점은 객체의 외부가 아니라 내부로 향한다. 실행 문맥에 대한 깊이 있는 고민 없이 객체가 관리할 데이터의 세부 정보를 먼저 결정한다. 객체 구현이 **이미 결정된 상태에서 다른 객체와의 협력 방법을 고민**하기 때문에 **이를 구현된 객체의 인터페이스를 억지로 끼워 맞출 수 밖에 없다.**
